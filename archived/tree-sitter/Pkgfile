version="0.20.0"
desc="An incremental parsing system for programming tools"
deps=["rust"]
makedeps=["rust"]
source=[
	{url="https://github.com/tree-sitter/tree-sitter/archive/v$version/tree-sitter-$version.tar.gz"},
]

build='''
	cd tree-sitter-$version
	export http_proxy=socks5://127.0.0.1:1080
	export CARGO_HOME="$srcdir/.cargo"
	cargo build $MAKEFLAGS --release --verbose
	make DESTDIR="$pkgdir" PREFIX=/ install
	install -Dt "$pkgdir"/bin target/release/tree-sitter
'''
